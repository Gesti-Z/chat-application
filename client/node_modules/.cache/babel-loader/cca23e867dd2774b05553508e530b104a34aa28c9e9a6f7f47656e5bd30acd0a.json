{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport React, { useMemo } from 'react';\nimport clsx from 'clsx';\nimport { Modal } from '../Modal';\nimport { useFetchReactions } from './hooks/useFetchReactions';\nimport { LoadingIndicator } from '../Loading';\nimport { Avatar } from '../Avatar';\nimport { useMessageContext } from '../../context';\nvar defaultSortReactionDetails = function (a, b) {\n  var _a, _b, _c, _d, _e, _f;\n  var aName = (_b = (_a = a.user) === null || _a === void 0 ? void 0 : _a.name) !== null && _b !== void 0 ? _b : (_c = a.user) === null || _c === void 0 ? void 0 : _c.id;\n  var bName = (_e = (_d = b.user) === null || _d === void 0 ? void 0 : _d.name) !== null && _e !== void 0 ? _e : (_f = b.user) === null || _f === void 0 ? void 0 : _f.id;\n  return aName ? bName ? aName.localeCompare(bName, 'en') : -1 : 1;\n};\nexport function ReactionsListModal(_a) {\n  var _b, _c;\n  var handleFetchReactions = _a.handleFetchReactions,\n    onSelectedReactionTypeChange = _a.onSelectedReactionTypeChange,\n    reactions = _a.reactions,\n    selectedReactionType = _a.selectedReactionType,\n    propSortReactionDetails = _a.sortReactionDetails,\n    modalProps = __rest(_a, [\"handleFetchReactions\", \"onSelectedReactionTypeChange\", \"reactions\", \"selectedReactionType\", \"sortReactionDetails\"]);\n  var selectedReaction = reactions.find(function (_a) {\n    var reactionType = _a.reactionType;\n    return reactionType === selectedReactionType;\n  });\n  var SelectedEmojiComponent = (_b = selectedReaction === null || selectedReaction === void 0 ? void 0 : selectedReaction.EmojiComponent) !== null && _b !== void 0 ? _b : null;\n  var _d = useFetchReactions({\n      handleFetchReactions: handleFetchReactions,\n      shouldFetch: modalProps.open\n    }),\n    areReactionsLoading = _d.isLoading,\n    allReactions = _d.reactions;\n  var contextSortReactionDetails = useMessageContext('ReactionsListModal').sortReactionDetails;\n  var sortReactionDetails = (_c = propSortReactionDetails !== null && propSortReactionDetails !== void 0 ? propSortReactionDetails : contextSortReactionDetails) !== null && _c !== void 0 ? _c : defaultSortReactionDetails;\n  var currentReactions = useMemo(function () {\n    if (!selectedReactionType) {\n      return [];\n    }\n    var unsortedCurrentReactions = allReactions.filter(function (reaction) {\n      return reaction.type === selectedReactionType && reaction.user;\n    });\n    return unsortedCurrentReactions.sort(sortReactionDetails);\n  }, [allReactions, selectedReactionType, sortReactionDetails]);\n  return React.createElement(Modal, __assign({}, modalProps), React.createElement(\"div\", {\n    className: 'str-chat__message-reactions-details',\n    \"data-testid\": 'reactions-list-modal'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-reactions-details-reaction-types'\n  }, reactions.map(function (_a) {\n    var EmojiComponent = _a.EmojiComponent,\n      reactionCount = _a.reactionCount,\n      reactionType = _a.reactionType;\n    return EmojiComponent && React.createElement(\"div\", {\n      className: clsx('str-chat__message-reactions-details-reaction-type', {\n        'str-chat__message-reactions-details-reaction-type--selected': selectedReactionType === reactionType\n      }),\n      \"data-testid\": \"reaction-details-selector-\".concat(reactionType),\n      key: reactionType,\n      onClick: function () {\n        return onSelectedReactionTypeChange === null || onSelectedReactionTypeChange === void 0 ? void 0 : onSelectedReactionTypeChange(reactionType);\n      }\n    }, React.createElement(\"span\", {\n      className: 'emoji str-chat__message-reaction-emoji str-chat__message-reaction-emoji--with-fallback'\n    }, React.createElement(EmojiComponent, null)), \"\\u00A0\", React.createElement(\"span\", {\n      className: 'str-chat__message-reaction-count'\n    }, reactionCount));\n  })), SelectedEmojiComponent && React.createElement(\"div\", {\n    className: 'emoji str-chat__message-reaction-emoji str-chat__message-reaction-emoji--with-fallback str-chat__message-reaction-emoji-big'\n  }, React.createElement(SelectedEmojiComponent, null)), React.createElement(\"div\", {\n    className: 'str-chat__message-reactions-details-reacting-users',\n    \"data-testid\": 'all-reacting-users'\n  }, areReactionsLoading ? React.createElement(LoadingIndicator, null) : currentReactions.map(function (_a) {\n    var user = _a.user;\n    return React.createElement(\"div\", {\n      className: 'str-chat__message-reactions-details-reacting-user',\n      key: user === null || user === void 0 ? void 0 : user.id\n    }, React.createElement(Avatar, {\n      \"data-testid\": 'avatar',\n      image: user === null || user === void 0 ? void 0 : user.image,\n      name: (user === null || user === void 0 ? void 0 : user.name) || (user === null || user === void 0 ? void 0 : user.id)\n    }), React.createElement(\"span\", {\n      className: 'str-chat__user-item--name',\n      \"data-testid\": 'reaction-user-username'\n    }, (user === null || user === void 0 ? void 0 : user.name) || (user === null || user === void 0 ? void 0 : user.id)));\n  }))));\n}","map":{"version":3,"names":["__assign","__rest","React","useMemo","clsx","Modal","useFetchReactions","LoadingIndicator","Avatar","useMessageContext","defaultSortReactionDetails","a","b","_a","_b","_c","_d","_e","_f","aName","user","name","id","bName","localeCompare","ReactionsListModal","handleFetchReactions","onSelectedReactionTypeChange","reactions","selectedReactionType","propSortReactionDetails","sortReactionDetails","modalProps","selectedReaction","find","reactionType","SelectedEmojiComponent","EmojiComponent","shouldFetch","open","areReactionsLoading","isLoading","allReactions","contextSortReactionDetails","currentReactions","unsortedCurrentReactions","filter","reaction","type","sort","createElement","className","map","reactionCount","concat","key","onClick","image"],"sources":["C:/Users/Gesti/Desktop/chat_application/client/node_modules/stream-chat-react/dist/components/Reactions/ReactionsListModal.js"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport React, { useMemo } from 'react';\nimport clsx from 'clsx';\nimport { Modal } from '../Modal';\nimport { useFetchReactions } from './hooks/useFetchReactions';\nimport { LoadingIndicator } from '../Loading';\nimport { Avatar } from '../Avatar';\nimport { useMessageContext } from '../../context';\nvar defaultSortReactionDetails = function (a, b) {\n    var _a, _b, _c, _d, _e, _f;\n    var aName = (_b = (_a = a.user) === null || _a === void 0 ? void 0 : _a.name) !== null && _b !== void 0 ? _b : (_c = a.user) === null || _c === void 0 ? void 0 : _c.id;\n    var bName = (_e = (_d = b.user) === null || _d === void 0 ? void 0 : _d.name) !== null && _e !== void 0 ? _e : (_f = b.user) === null || _f === void 0 ? void 0 : _f.id;\n    return aName ? (bName ? aName.localeCompare(bName, 'en') : -1) : 1;\n};\nexport function ReactionsListModal(_a) {\n    var _b, _c;\n    var handleFetchReactions = _a.handleFetchReactions, onSelectedReactionTypeChange = _a.onSelectedReactionTypeChange, reactions = _a.reactions, selectedReactionType = _a.selectedReactionType, propSortReactionDetails = _a.sortReactionDetails, modalProps = __rest(_a, [\"handleFetchReactions\", \"onSelectedReactionTypeChange\", \"reactions\", \"selectedReactionType\", \"sortReactionDetails\"]);\n    var selectedReaction = reactions.find(function (_a) {\n        var reactionType = _a.reactionType;\n        return reactionType === selectedReactionType;\n    });\n    var SelectedEmojiComponent = (_b = selectedReaction === null || selectedReaction === void 0 ? void 0 : selectedReaction.EmojiComponent) !== null && _b !== void 0 ? _b : null;\n    var _d = useFetchReactions({\n        handleFetchReactions: handleFetchReactions,\n        shouldFetch: modalProps.open,\n    }), areReactionsLoading = _d.isLoading, allReactions = _d.reactions;\n    var contextSortReactionDetails = useMessageContext('ReactionsListModal').sortReactionDetails;\n    var sortReactionDetails = (_c = propSortReactionDetails !== null && propSortReactionDetails !== void 0 ? propSortReactionDetails : contextSortReactionDetails) !== null && _c !== void 0 ? _c : defaultSortReactionDetails;\n    var currentReactions = useMemo(function () {\n        if (!selectedReactionType) {\n            return [];\n        }\n        var unsortedCurrentReactions = allReactions.filter(function (reaction) { return reaction.type === selectedReactionType && reaction.user; });\n        return unsortedCurrentReactions.sort(sortReactionDetails);\n    }, [allReactions, selectedReactionType, sortReactionDetails]);\n    return (React.createElement(Modal, __assign({}, modalProps),\n        React.createElement(\"div\", { className: 'str-chat__message-reactions-details', \"data-testid\": 'reactions-list-modal' },\n            React.createElement(\"div\", { className: 'str-chat__message-reactions-details-reaction-types' }, reactions.map(function (_a) {\n                var EmojiComponent = _a.EmojiComponent, reactionCount = _a.reactionCount, reactionType = _a.reactionType;\n                return EmojiComponent && (React.createElement(\"div\", { className: clsx('str-chat__message-reactions-details-reaction-type', {\n                        'str-chat__message-reactions-details-reaction-type--selected': selectedReactionType === reactionType,\n                    }), \"data-testid\": \"reaction-details-selector-\".concat(reactionType), key: reactionType, onClick: function () { return onSelectedReactionTypeChange === null || onSelectedReactionTypeChange === void 0 ? void 0 : onSelectedReactionTypeChange(reactionType); } },\n                    React.createElement(\"span\", { className: 'emoji str-chat__message-reaction-emoji str-chat__message-reaction-emoji--with-fallback' },\n                        React.createElement(EmojiComponent, null)),\n                    \"\\u00A0\",\n                    React.createElement(\"span\", { className: 'str-chat__message-reaction-count' }, reactionCount)));\n            })),\n            SelectedEmojiComponent && (React.createElement(\"div\", { className: 'emoji str-chat__message-reaction-emoji str-chat__message-reaction-emoji--with-fallback str-chat__message-reaction-emoji-big' },\n                React.createElement(SelectedEmojiComponent, null))),\n            React.createElement(\"div\", { className: 'str-chat__message-reactions-details-reacting-users', \"data-testid\": 'all-reacting-users' }, areReactionsLoading ? (React.createElement(LoadingIndicator, null)) : (currentReactions.map(function (_a) {\n                var user = _a.user;\n                return (React.createElement(\"div\", { className: 'str-chat__message-reactions-details-reacting-user', key: user === null || user === void 0 ? void 0 : user.id },\n                    React.createElement(Avatar, { \"data-testid\": 'avatar', image: user === null || user === void 0 ? void 0 : user.image, name: (user === null || user === void 0 ? void 0 : user.name) || (user === null || user === void 0 ? void 0 : user.id) }),\n                    React.createElement(\"span\", { className: 'str-chat__user-item--name', \"data-testid\": 'reaction-user-username' }, (user === null || user === void 0 ? void 0 : user.name) || (user === null || user === void 0 ? void 0 : user.id))));\n            }))))));\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}