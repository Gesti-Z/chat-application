{"ast":null,"code":"import clsx from 'clsx';\nimport React, { useCallback, useState } from 'react';\nimport { BaseImage as DefaultBaseImage } from '../Gallery';\nimport { FileIcon } from '../ReactFileUtilities';\nimport { useComponentContext, useMessageInputContext } from '../../context';\nimport { useFileState } from './hooks/useFileState';\nimport { CloseIcon, DownloadIcon, LoadingIndicatorIcon, RetryIcon } from './icons';\nexport var AttachmentPreviewList = function () {\n  var _a = useMessageInputContext('AttachmentPreviewList'),\n    fileOrder = _a.fileOrder,\n    imageOrder = _a.imageOrder;\n  return React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-list'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__attachment-list-scroll-container',\n    \"data-testid\": 'attachment-list-scroll-container'\n  }, imageOrder.map(function (id) {\n    return React.createElement(ImagePreviewItem, {\n      id: id,\n      key: id\n    });\n  }), fileOrder.map(function (id) {\n    return React.createElement(FilePreviewItem, {\n      id: id,\n      key: id\n    });\n  })));\n};\nexport var ImagePreviewItem = function (_a) {\n  var _b;\n  var id = _a.id;\n  var _c = useComponentContext('ImagePreviewItem').BaseImage,\n    BaseImage = _c === void 0 ? DefaultBaseImage : _c;\n  var _d = useMessageInputContext('ImagePreviewItem'),\n    imageUploads = _d.imageUploads,\n    removeImage = _d.removeImage,\n    uploadImage = _d.uploadImage;\n  var _e = useState(false),\n    previewError = _e[0],\n    setPreviewError = _e[1];\n  var handleRemove = useCallback(function (e) {\n    e.stopPropagation();\n    removeImage(id);\n  }, [removeImage, id]);\n  var handleRetry = useCallback(function () {\n    return uploadImage(id);\n  }, [uploadImage, id]);\n  var handleLoadError = useCallback(function () {\n    return setPreviewError(true);\n  }, []);\n  var image = imageUploads[id];\n  // do not display scraped attachments\n  if (!image || image.og_scrape_url) return null;\n  return React.createElement(\"div\", {\n    className: clsx('str-chat__attachment-preview-image', {\n      'str-chat__attachment-preview-image--error': previewError\n    }),\n    \"data-testid\": 'attachment-preview-image'\n  }, React.createElement(\"button\", {\n    className: 'str-chat__attachment-preview-delete',\n    \"data-testid\": 'image-preview-item-delete-button',\n    disabled: image.state === 'uploading',\n    onClick: handleRemove\n  }, React.createElement(CloseIcon, null)), image.state === 'failed' && React.createElement(\"button\", {\n    className: 'str-chat__attachment-preview-error str-chat__attachment-preview-error-image',\n    \"data-testid\": 'image-preview-item-retry-button',\n    onClick: handleRetry\n  }, React.createElement(RetryIcon, null)), image.state === 'uploading' && React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-image-loading'\n  }, React.createElement(LoadingIndicatorIcon, {\n    size: 17\n  })), (image.previewUri || image.url) && React.createElement(BaseImage, {\n    alt: image.file.name,\n    className: 'str-chat__attachment-preview-thumbnail',\n    onError: handleLoadError,\n    src: (_b = image.previewUri) !== null && _b !== void 0 ? _b : image.url,\n    title: image.file.name\n  }));\n};\nvar FilePreviewItem = function (_a) {\n  var id = _a.id;\n  var _b = useMessageInputContext('FilePreviewItem'),\n    fileUploads = _b.fileUploads,\n    removeFile = _b.removeFile,\n    uploadFile = _b.uploadFile;\n  var handleRemove = useCallback(function (e) {\n    e.stopPropagation();\n    removeFile(id);\n  }, [removeFile, id]);\n  var handleRetry = useCallback(function () {\n    return uploadFile(id);\n  }, [uploadFile, id]);\n  var file = fileUploads[id];\n  var state = useFileState(file);\n  if (!file) return null;\n  return React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-file',\n    \"data-testid\": 'attachment-preview-file'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-file-icon'\n  }, React.createElement(FileIcon, {\n    filename: file.file.name,\n    mimeType: file.file.type,\n    version: '2'\n  })), React.createElement(\"button\", {\n    className: 'str-chat__attachment-preview-delete',\n    \"data-testid\": 'file-preview-item-delete-button',\n    disabled: state.uploading,\n    onClick: handleRemove\n  }, React.createElement(CloseIcon, null)), state.failed && React.createElement(\"button\", {\n    className: 'str-chat__attachment-preview-error str-chat__attachment-preview-error-file',\n    \"data-testid\": 'file-preview-item-retry-button',\n    onClick: handleRetry\n  }, React.createElement(RetryIcon, null)), React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-file-end'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-file-name'\n  }, file.file.name), state.finished && React.createElement(\"a\", {\n    className: 'str-chat__attachment-preview-file-download',\n    download: true,\n    href: file.url,\n    rel: 'noreferrer',\n    target: '_blank'\n  }, React.createElement(DownloadIcon, null)), state.uploading && React.createElement(LoadingIndicatorIcon, {\n    size: 17\n  })));\n};","map":{"version":3,"names":["clsx","React","useCallback","useState","BaseImage","DefaultBaseImage","FileIcon","useComponentContext","useMessageInputContext","useFileState","CloseIcon","DownloadIcon","LoadingIndicatorIcon","RetryIcon","AttachmentPreviewList","_a","fileOrder","imageOrder","createElement","className","map","id","ImagePreviewItem","key","FilePreviewItem","_b","_c","_d","imageUploads","removeImage","uploadImage","_e","previewError","setPreviewError","handleRemove","e","stopPropagation","handleRetry","handleLoadError","image","og_scrape_url","disabled","state","onClick","size","previewUri","url","alt","file","name","onError","src","title","fileUploads","removeFile","uploadFile","filename","mimeType","type","version","uploading","failed","finished","download","href","rel","target"],"sources":["C:/Users/Gesti/Desktop/chat_application/client/node_modules/stream-chat-react/dist/components/MessageInput/AttachmentPreviewList.js"],"sourcesContent":["import clsx from 'clsx';\nimport React, { useCallback, useState } from 'react';\nimport { BaseImage as DefaultBaseImage } from '../Gallery';\nimport { FileIcon } from '../ReactFileUtilities';\nimport { useComponentContext, useMessageInputContext } from '../../context';\nimport { useFileState } from './hooks/useFileState';\nimport { CloseIcon, DownloadIcon, LoadingIndicatorIcon, RetryIcon } from './icons';\nexport var AttachmentPreviewList = function () {\n    var _a = useMessageInputContext('AttachmentPreviewList'), fileOrder = _a.fileOrder, imageOrder = _a.imageOrder;\n    return (React.createElement(\"div\", { className: 'str-chat__attachment-preview-list' },\n        React.createElement(\"div\", { className: 'str-chat__attachment-list-scroll-container', \"data-testid\": 'attachment-list-scroll-container' },\n            imageOrder.map(function (id) { return (React.createElement(ImagePreviewItem, { id: id, key: id })); }),\n            fileOrder.map(function (id) { return (React.createElement(FilePreviewItem, { id: id, key: id })); }))));\n};\nexport var ImagePreviewItem = function (_a) {\n    var _b;\n    var id = _a.id;\n    var _c = useComponentContext('ImagePreviewItem').BaseImage, BaseImage = _c === void 0 ? DefaultBaseImage : _c;\n    var _d = useMessageInputContext('ImagePreviewItem'), imageUploads = _d.imageUploads, removeImage = _d.removeImage, uploadImage = _d.uploadImage;\n    var _e = useState(false), previewError = _e[0], setPreviewError = _e[1];\n    var handleRemove = useCallback(function (e) {\n        e.stopPropagation();\n        removeImage(id);\n    }, [removeImage, id]);\n    var handleRetry = useCallback(function () { return uploadImage(id); }, [uploadImage, id]);\n    var handleLoadError = useCallback(function () { return setPreviewError(true); }, []);\n    var image = imageUploads[id];\n    // do not display scraped attachments\n    if (!image || image.og_scrape_url)\n        return null;\n    return (React.createElement(\"div\", { className: clsx('str-chat__attachment-preview-image', {\n            'str-chat__attachment-preview-image--error': previewError,\n        }), \"data-testid\": 'attachment-preview-image' },\n        React.createElement(\"button\", { className: 'str-chat__attachment-preview-delete', \"data-testid\": 'image-preview-item-delete-button', disabled: image.state === 'uploading', onClick: handleRemove },\n            React.createElement(CloseIcon, null)),\n        image.state === 'failed' && (React.createElement(\"button\", { className: 'str-chat__attachment-preview-error str-chat__attachment-preview-error-image', \"data-testid\": 'image-preview-item-retry-button', onClick: handleRetry },\n            React.createElement(RetryIcon, null))),\n        image.state === 'uploading' && (React.createElement(\"div\", { className: 'str-chat__attachment-preview-image-loading' },\n            React.createElement(LoadingIndicatorIcon, { size: 17 }))),\n        (image.previewUri || image.url) && (React.createElement(BaseImage, { alt: image.file.name, className: 'str-chat__attachment-preview-thumbnail', onError: handleLoadError, src: (_b = image.previewUri) !== null && _b !== void 0 ? _b : image.url, title: image.file.name }))));\n};\nvar FilePreviewItem = function (_a) {\n    var id = _a.id;\n    var _b = useMessageInputContext('FilePreviewItem'), fileUploads = _b.fileUploads, removeFile = _b.removeFile, uploadFile = _b.uploadFile;\n    var handleRemove = useCallback(function (e) {\n        e.stopPropagation();\n        removeFile(id);\n    }, [removeFile, id]);\n    var handleRetry = useCallback(function () { return uploadFile(id); }, [uploadFile, id]);\n    var file = fileUploads[id];\n    var state = useFileState(file);\n    if (!file)\n        return null;\n    return (React.createElement(\"div\", { className: 'str-chat__attachment-preview-file', \"data-testid\": 'attachment-preview-file' },\n        React.createElement(\"div\", { className: 'str-chat__attachment-preview-file-icon' },\n            React.createElement(FileIcon, { filename: file.file.name, mimeType: file.file.type, version: '2' })),\n        React.createElement(\"button\", { className: 'str-chat__attachment-preview-delete', \"data-testid\": 'file-preview-item-delete-button', disabled: state.uploading, onClick: handleRemove },\n            React.createElement(CloseIcon, null)),\n        state.failed && (React.createElement(\"button\", { className: 'str-chat__attachment-preview-error str-chat__attachment-preview-error-file', \"data-testid\": 'file-preview-item-retry-button', onClick: handleRetry },\n            React.createElement(RetryIcon, null))),\n        React.createElement(\"div\", { className: 'str-chat__attachment-preview-file-end' },\n            React.createElement(\"div\", { className: 'str-chat__attachment-preview-file-name' }, file.file.name),\n            state.finished && (React.createElement(\"a\", { className: 'str-chat__attachment-preview-file-download', download: true, href: file.url, rel: 'noreferrer', target: '_blank' },\n                React.createElement(DownloadIcon, null))),\n            state.uploading && React.createElement(LoadingIndicatorIcon, { size: 17 }))));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}