{"ast":null,"code":"import { __assign, __awaiter, __generator, __rest } from \"tslib\";\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\nimport { GiphyPreviewMessage as DefaultGiphyPreviewMessage } from './GiphyPreviewMessage';\nimport { useLastReadData } from './hooks';\nimport { useGiphyPreview, useMessageSetKey, useNewMessageNotification, usePrependedMessagesCount, useScrollToBottomOnNewMessage, useShouldForceScrollToBottom, useUnreadMessagesNotificationVirtualized } from './hooks/VirtualizedMessageList';\nimport { useMarkRead } from './hooks/useMarkRead';\nimport { MessageNotification as DefaultMessageNotification } from './MessageNotification';\nimport { MessageListNotifications as DefaultMessageListNotifications } from './MessageListNotifications';\nimport { MessageListMainPanel } from './MessageListMainPanel';\nimport { getGroupStyles, getLastReceived, processMessages } from './utils';\nimport { MessageSimple } from '../Message';\nimport { UnreadMessagesNotification as DefaultUnreadMessagesNotification } from './UnreadMessagesNotification';\nimport { calculateFirstItemIndex, calculateItemIndex, EmptyPlaceholder, Footer, Header, Item, makeItemsRenderedHandler, messageRenderer } from './VirtualizedMessageListComponents';\nimport { useChannelActionContext } from '../../context/ChannelActionContext';\nimport { useChannelStateContext } from '../../context/ChannelStateContext';\nimport { useChatContext } from '../../context/ChatContext';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { DEFAULT_NEXT_CHANNEL_PAGE_SIZE } from '../../constants/limits';\nfunction captureResizeObserverExceededError(e) {\n  if (e.message === 'ResizeObserver loop completed with undelivered notifications.' || e.message === 'ResizeObserver loop limit exceeded') {\n    e.stopImmediatePropagation();\n  }\n}\nfunction useCaptureResizeObserverExceededError() {\n  useEffect(function () {\n    window.addEventListener('error', captureResizeObserverExceededError);\n    return function () {\n      window.removeEventListener('error', captureResizeObserverExceededError);\n    };\n  }, []);\n}\nfunction fractionalItemSize(element) {\n  return element.getBoundingClientRect().height;\n}\nfunction findMessageIndex(messages, id) {\n  return messages.findIndex(function (message) {\n    return message.id === id;\n  });\n}\nfunction calculateInitialTopMostItemIndex(messages, highlightedMessageId) {\n  if (highlightedMessageId) {\n    var index = findMessageIndex(messages, highlightedMessageId);\n    if (index !== -1) {\n      return {\n        align: 'center',\n        index: index\n      };\n    }\n  }\n  return messages.length - 1;\n}\nvar VirtualizedMessageListWithContext = function (props) {\n  var _a, _b;\n  var additionalMessageInputProps = props.additionalMessageInputProps,\n    _c = props.additionalVirtuosoProps,\n    additionalVirtuosoProps = _c === void 0 ? {} : _c,\n    channel = props.channel,\n    channelUnreadUiState = props.channelUnreadUiState,\n    closeReactionSelectorOnClick = props.closeReactionSelectorOnClick,\n    customMessageActions = props.customMessageActions,\n    customMessageRenderer = props.customMessageRenderer,\n    defaultItemHeight = props.defaultItemHeight,\n    _d = props.disableDateSeparator,\n    disableDateSeparator = _d === void 0 ? true : _d,\n    groupStyles = props.groupStyles,\n    hasMoreNewer = props.hasMoreNewer,\n    head = props.head,\n    _e = props.hideDeletedMessages,\n    hideDeletedMessages = _e === void 0 ? false : _e,\n    _f = props.hideNewMessageSeparator,\n    hideNewMessageSeparator = _f === void 0 ? false : _f,\n    highlightedMessageId = props.highlightedMessageId,\n    jumpToLatestMessage = props.jumpToLatestMessage,\n    loadingMore = props.loadingMore,\n    loadMore = props.loadMore,\n    loadMoreNewer = props.loadMoreNewer,\n    MessageUIComponentFromProps = props.Message,\n    messageActions = props.messageActions,\n    _g = props.messageLimit,\n    messageLimit = _g === void 0 ? DEFAULT_NEXT_CHANNEL_PAGE_SIZE : _g,\n    messages = props.messages,\n    notifications = props.notifications,\n    // TODO: refactor to scrollSeekPlaceHolderConfiguration and components.ScrollSeekPlaceholder, like the Virtuoso Component\n    _h = props.overscan,\n    // TODO: refactor to scrollSeekPlaceHolderConfiguration and components.ScrollSeekPlaceholder, like the Virtuoso Component\n    overscan = _h === void 0 ? 0 : _h,\n    read = props.read,\n    _j = props.returnAllReadData,\n    returnAllReadData = _j === void 0 ? false : _j,\n    scrollSeekPlaceHolder = props.scrollSeekPlaceHolder,\n    _k = props.scrollToLatestMessageOnFocus,\n    scrollToLatestMessageOnFocus = _k === void 0 ? false : _k,\n    _l = props.separateGiphyPreview,\n    separateGiphyPreview = _l === void 0 ? false : _l,\n    _m = props.shouldGroupByUser,\n    shouldGroupByUser = _m === void 0 ? false : _m,\n    showUnreadNotificationAlways = props.showUnreadNotificationAlways,\n    sortReactionDetails = props.sortReactionDetails,\n    sortReactions = props.sortReactions,\n    _o = props.stickToBottomScrollBehavior,\n    stickToBottomScrollBehavior = _o === void 0 ? 'smooth' : _o,\n    suppressAutoscroll = props.suppressAutoscroll,\n    threadList = props.threadList;\n  var virtuosoComponentsFromProps = additionalVirtuosoProps.components,\n    overridingVirtuosoProps = __rest(additionalVirtuosoProps, [\"components\"]);\n  // Stops errors generated from react-virtuoso to bubble up\n  // to Sentry or other tracking tools.\n  useCaptureResizeObserverExceededError();\n  var _p = useComponentContext('VirtualizedMessageList'),\n    DateSeparator = _p.DateSeparator,\n    _q = _p.GiphyPreviewMessage,\n    GiphyPreviewMessage = _q === void 0 ? DefaultGiphyPreviewMessage : _q,\n    _r = _p.MessageListNotifications,\n    MessageListNotifications = _r === void 0 ? DefaultMessageListNotifications : _r,\n    _s = _p.MessageNotification,\n    MessageNotification = _s === void 0 ? DefaultMessageNotification : _s,\n    MessageSystem = _p.MessageSystem,\n    _t = _p.UnreadMessagesNotification,\n    UnreadMessagesNotification = _t === void 0 ? DefaultUnreadMessagesNotification : _t,\n    UnreadMessagesSeparator = _p.UnreadMessagesSeparator,\n    _u = _p.VirtualMessage,\n    MessageUIComponentFromContext = _u === void 0 ? MessageSimple : _u;\n  var MessageUIComponent = MessageUIComponentFromProps || MessageUIComponentFromContext;\n  var _v = useChatContext('VirtualizedMessageList'),\n    client = _v.client,\n    customClasses = _v.customClasses;\n  var virtuoso = useRef(null);\n  var lastRead = useMemo(function () {\n    var _a;\n    return (_a = channel.lastRead) === null || _a === void 0 ? void 0 : _a.call(channel);\n  }, [channel]);\n  var _w = useUnreadMessagesNotificationVirtualized({\n      lastRead: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.last_read,\n      showAlways: !!showUnreadNotificationAlways,\n      unreadCount: (_a = channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages) !== null && _a !== void 0 ? _a : 0\n    }),\n    showUnreadMessagesNotification = _w.show,\n    toggleShowUnreadMessagesNotification = _w.toggleShowUnreadMessagesNotification;\n  var _x = useGiphyPreview(separateGiphyPreview),\n    giphyPreviewMessage = _x.giphyPreviewMessage,\n    setGiphyPreviewMessage = _x.setGiphyPreviewMessage;\n  var processedMessages = useMemo(function () {\n    if (typeof messages === 'undefined') {\n      return [];\n    }\n    if (disableDateSeparator && !hideDeletedMessages && hideNewMessageSeparator && !separateGiphyPreview) {\n      return messages;\n    }\n    return processMessages({\n      enableDateSeparator: !disableDateSeparator,\n      hideDeletedMessages: hideDeletedMessages,\n      hideNewMessageSeparator: hideNewMessageSeparator,\n      lastRead: lastRead,\n      messages: messages,\n      setGiphyPreviewMessage: setGiphyPreviewMessage,\n      userId: client.userID || ''\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [disableDateSeparator, hideDeletedMessages, hideNewMessageSeparator, lastRead, messages, messages === null || messages === void 0 ? void 0 : messages.length, client.userID]);\n  // get the mapping of own messages to array of users who read them\n  var ownMessagesReadByOthers = useLastReadData({\n    messages: processedMessages,\n    read: read,\n    returnAllReadData: returnAllReadData,\n    userID: client.userID\n  });\n  var lastReceivedMessageId = useMemo(function () {\n    return getLastReceived(processedMessages);\n  }, [processedMessages]);\n  var groupStylesFn = groupStyles || getGroupStyles;\n  var messageGroupStyles = useMemo(function () {\n    return processedMessages.reduce(function (acc, message, i) {\n      var style = groupStylesFn(message, processedMessages[i - 1], processedMessages[i + 1], !shouldGroupByUser);\n      if (style) acc[message.id] = style;\n      return acc;\n    }, {});\n  },\n  // processedMessages were incorrectly rebuilt with a new object identity at some point, hence the .length usage\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [processedMessages.length, shouldGroupByUser, groupStylesFn]);\n  var _y = useNewMessageNotification(processedMessages, client.userID, hasMoreNewer),\n    atBottom = _y.atBottom,\n    isMessageListScrolledToBottom = _y.isMessageListScrolledToBottom,\n    newMessagesNotification = _y.newMessagesNotification,\n    setIsMessageListScrolledToBottom = _y.setIsMessageListScrolledToBottom,\n    setNewMessagesNotification = _y.setNewMessagesNotification;\n  useMarkRead({\n    isMessageListScrolledToBottom: isMessageListScrolledToBottom,\n    messageListIsThread: !!threadList,\n    unreadCount: (_b = channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages) !== null && _b !== void 0 ? _b : 0,\n    wasMarkedUnread: !!(channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.first_unread_message_id)\n  });\n  var scrollToBottom = useCallback(function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!hasMoreNewer) return [3 /*break*/, 2];\n            return [4 /*yield*/, jumpToLatestMessage()];\n          case 1:\n            _a.sent();\n            return [2 /*return*/];\n          case 2:\n            if (virtuoso.current) {\n              virtuoso.current.scrollToIndex(processedMessages.length - 1);\n            }\n            setNewMessagesNotification(false);\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [virtuoso, processedMessages, setNewMessagesNotification,\n  // processedMessages were incorrectly rebuilt with a new object identity at some point, hence the .length usage\n  processedMessages.length, hasMoreNewer, jumpToLatestMessage]);\n  useScrollToBottomOnNewMessage({\n    messages: messages,\n    scrollToBottom: scrollToBottom,\n    scrollToLatestMessageOnFocus: scrollToLatestMessageOnFocus\n  });\n  var numItemsPrepended = usePrependedMessagesCount(processedMessages, !disableDateSeparator);\n  var messageSetKey = useMessageSetKey({\n    messages: messages\n  }).messageSetKey;\n  var shouldForceScrollToBottom = useShouldForceScrollToBottom(processedMessages, client.userID);\n  var handleItemsRendered = useMemo(function () {\n    return makeItemsRenderedHandler([toggleShowUnreadMessagesNotification], processedMessages);\n  }, [processedMessages, toggleShowUnreadMessagesNotification]);\n  var followOutput = function (isAtBottom) {\n    if (hasMoreNewer || suppressAutoscroll) {\n      return false;\n    }\n    if (shouldForceScrollToBottom()) {\n      return isAtBottom ? stickToBottomScrollBehavior : 'auto';\n    }\n    // a message from another user has been received - don't scroll to bottom unless already there\n    return isAtBottom ? stickToBottomScrollBehavior : false;\n  };\n  var computeItemKey = useCallback(function (index, _, _a) {\n    var numItemsPrepended = _a.numItemsPrepended,\n      processedMessages = _a.processedMessages;\n    return processedMessages[calculateItemIndex(index, numItemsPrepended)].id;\n  }, []);\n  var atBottomStateChange = function (isAtBottom) {\n    atBottom.current = isAtBottom;\n    setIsMessageListScrolledToBottom(isAtBottom);\n    if (isAtBottom) {\n      loadMoreNewer === null || loadMoreNewer === void 0 ? void 0 : loadMoreNewer(messageLimit);\n      setNewMessagesNotification === null || setNewMessagesNotification === void 0 ? void 0 : setNewMessagesNotification(false);\n    }\n  };\n  var atTopStateChange = function (isAtTop) {\n    if (isAtTop) {\n      loadMore === null || loadMore === void 0 ? void 0 : loadMore(messageLimit);\n    }\n  };\n  useEffect(function () {\n    var scrollTimeout;\n    if (highlightedMessageId) {\n      var index_1 = findMessageIndex(processedMessages, highlightedMessageId);\n      if (index_1 !== -1) {\n        scrollTimeout = setTimeout(function () {\n          var _a;\n          (_a = virtuoso.current) === null || _a === void 0 ? void 0 : _a.scrollToIndex({\n            align: 'center',\n            index: index_1\n          });\n        }, 0);\n      }\n    }\n    return function () {\n      clearTimeout(scrollTimeout);\n    };\n  }, [highlightedMessageId, processedMessages]);\n  if (!processedMessages) return null;\n  return React.createElement(React.Fragment, null, React.createElement(MessageListMainPanel, null, !threadList && showUnreadMessagesNotification && React.createElement(UnreadMessagesNotification, {\n    unreadCount: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages\n  }), React.createElement(\"div\", {\n    className: (customClasses === null || customClasses === void 0 ? void 0 : customClasses.virtualizedMessageList) || 'str-chat__virtual-list'\n  }, React.createElement(Virtuoso, __assign({\n    atBottomStateChange: atBottomStateChange,\n    atBottomThreshold: 100,\n    atTopStateChange: atTopStateChange,\n    atTopThreshold: 100,\n    className: 'str-chat__message-list-scroll',\n    components: __assign({\n      EmptyPlaceholder: EmptyPlaceholder,\n      Footer: Footer,\n      Header: Header,\n      Item: Item\n    }, virtuosoComponentsFromProps),\n    computeItemKey: computeItemKey,\n    context: {\n      additionalMessageInputProps: additionalMessageInputProps,\n      closeReactionSelectorOnClick: closeReactionSelectorOnClick,\n      customClasses: customClasses,\n      customMessageActions: customMessageActions,\n      customMessageRenderer: customMessageRenderer,\n      DateSeparator: DateSeparator,\n      firstUnreadMessageId: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.first_unread_message_id,\n      head: head,\n      lastReadDate: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.last_read,\n      lastReadMessageId: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.last_read_message_id,\n      lastReceivedMessageId: lastReceivedMessageId,\n      loadingMore: loadingMore,\n      Message: MessageUIComponent,\n      messageActions: messageActions,\n      messageGroupStyles: messageGroupStyles,\n      MessageSystem: MessageSystem,\n      numItemsPrepended: numItemsPrepended,\n      ownMessagesReadByOthers: ownMessagesReadByOthers,\n      processedMessages: processedMessages,\n      shouldGroupByUser: shouldGroupByUser,\n      sortReactionDetails: sortReactionDetails,\n      sortReactions: sortReactions,\n      threadList: threadList,\n      unreadMessageCount: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages,\n      UnreadMessagesSeparator: UnreadMessagesSeparator,\n      virtuosoRef: virtuoso\n    },\n    firstItemIndex: calculateFirstItemIndex(numItemsPrepended),\n    followOutput: followOutput,\n    increaseViewportBy: {\n      bottom: 200,\n      top: 0\n    },\n    initialTopMostItemIndex: calculateInitialTopMostItemIndex(processedMessages, highlightedMessageId),\n    itemContent: messageRenderer,\n    itemSize: fractionalItemSize,\n    itemsRendered: handleItemsRendered,\n    key: messageSetKey,\n    overscan: overscan,\n    ref: virtuoso,\n    style: {\n      overflowX: 'hidden'\n    },\n    totalCount: processedMessages.length\n  }, overridingVirtuosoProps, scrollSeekPlaceHolder ? {\n    scrollSeek: scrollSeekPlaceHolder\n  } : {}, defaultItemHeight ? {\n    defaultItemHeight: defaultItemHeight\n  } : {})))), React.createElement(MessageListNotifications, {\n    hasNewMessages: newMessagesNotification,\n    isMessageListScrolledToBottom: isMessageListScrolledToBottom,\n    isNotAtLatestMessageSet: hasMoreNewer,\n    MessageNotification: MessageNotification,\n    notifications: notifications,\n    scrollToBottom: scrollToBottom,\n    threadList: threadList,\n    unreadCount: threadList ? undefined : channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages\n  }), giphyPreviewMessage && React.createElement(GiphyPreviewMessage, {\n    message: giphyPreviewMessage\n  }));\n};\n/**\n * The VirtualizedMessageList component renders a list of messages in a virtualized list.\n * It is a consumer of the React contexts set in [Channel](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Channel/Channel.tsx).\n */\nexport function VirtualizedMessageList(props) {\n  var _a = useChannelActionContext('VirtualizedMessageList'),\n    jumpToLatestMessage = _a.jumpToLatestMessage,\n    loadMore = _a.loadMore,\n    loadMoreNewer = _a.loadMoreNewer;\n  var _b = useChannelStateContext('VirtualizedMessageList'),\n    channel = _b.channel,\n    channelUnreadUiState = _b.channelUnreadUiState,\n    hasMore = _b.hasMore,\n    hasMoreNewer = _b.hasMoreNewer,\n    highlightedMessageId = _b.highlightedMessageId,\n    loadingMore = _b.loadingMore,\n    loadingMoreNewer = _b.loadingMoreNewer,\n    contextMessages = _b.messages,\n    notifications = _b.notifications,\n    read = _b.read,\n    suppressAutoscroll = _b.suppressAutoscroll;\n  var messages = props.messages || contextMessages;\n  return React.createElement(VirtualizedMessageListWithContext, __assign({\n    channel: channel,\n    channelUnreadUiState: channelUnreadUiState,\n    hasMore: !!hasMore,\n    hasMoreNewer: !!hasMoreNewer,\n    highlightedMessageId: highlightedMessageId,\n    jumpToLatestMessage: jumpToLatestMessage,\n    loadingMore: !!loadingMore,\n    loadingMoreNewer: !!loadingMoreNewer,\n    loadMore: loadMore,\n    loadMoreNewer: loadMoreNewer,\n    messages: messages,\n    notifications: notifications,\n    read: read,\n    suppressAutoscroll: suppressAutoscroll\n  }, props));\n}","map":{"version":3,"names":["__assign","__awaiter","__generator","__rest","React","useCallback","useEffect","useMemo","useRef","Virtuoso","GiphyPreviewMessage","DefaultGiphyPreviewMessage","useLastReadData","useGiphyPreview","useMessageSetKey","useNewMessageNotification","usePrependedMessagesCount","useScrollToBottomOnNewMessage","useShouldForceScrollToBottom","useUnreadMessagesNotificationVirtualized","useMarkRead","MessageNotification","DefaultMessageNotification","MessageListNotifications","DefaultMessageListNotifications","MessageListMainPanel","getGroupStyles","getLastReceived","processMessages","MessageSimple","UnreadMessagesNotification","DefaultUnreadMessagesNotification","calculateFirstItemIndex","calculateItemIndex","EmptyPlaceholder","Footer","Header","Item","makeItemsRenderedHandler","messageRenderer","useChannelActionContext","useChannelStateContext","useChatContext","useComponentContext","DEFAULT_NEXT_CHANNEL_PAGE_SIZE","captureResizeObserverExceededError","e","message","stopImmediatePropagation","useCaptureResizeObserverExceededError","window","addEventListener","removeEventListener","fractionalItemSize","element","getBoundingClientRect","height","findMessageIndex","messages","id","findIndex","calculateInitialTopMostItemIndex","highlightedMessageId","index","align","length","VirtualizedMessageListWithContext","props","_a","_b","additionalMessageInputProps","_c","additionalVirtuosoProps","channel","channelUnreadUiState","closeReactionSelectorOnClick","customMessageActions","customMessageRenderer","defaultItemHeight","_d","disableDateSeparator","groupStyles","hasMoreNewer","head","_e","hideDeletedMessages","_f","hideNewMessageSeparator","jumpToLatestMessage","loadingMore","loadMore","loadMoreNewer","MessageUIComponentFromProps","Message","messageActions","_g","messageLimit","notifications","_h","overscan","read","_j","returnAllReadData","scrollSeekPlaceHolder","_k","scrollToLatestMessageOnFocus","_l","separateGiphyPreview","_m","shouldGroupByUser","showUnreadNotificationAlways","sortReactionDetails","sortReactions","_o","stickToBottomScrollBehavior","suppressAutoscroll","threadList","virtuosoComponentsFromProps","components","overridingVirtuosoProps","_p","DateSeparator","_q","_r","_s","MessageSystem","_t","UnreadMessagesSeparator","_u","VirtualMessage","MessageUIComponentFromContext","MessageUIComponent","_v","client","customClasses","virtuoso","lastRead","call","_w","last_read","showAlways","unreadCount","unread_messages","showUnreadMessagesNotification","show","toggleShowUnreadMessagesNotification","_x","giphyPreviewMessage","setGiphyPreviewMessage","processedMessages","enableDateSeparator","userId","userID","ownMessagesReadByOthers","lastReceivedMessageId","groupStylesFn","messageGroupStyles","reduce","acc","i","style","_y","atBottom","isMessageListScrolledToBottom","newMessagesNotification","setIsMessageListScrolledToBottom","setNewMessagesNotification","messageListIsThread","wasMarkedUnread","first_unread_message_id","scrollToBottom","label","sent","current","scrollToIndex","numItemsPrepended","messageSetKey","shouldForceScrollToBottom","handleItemsRendered","followOutput","isAtBottom","computeItemKey","_","atBottomStateChange","atTopStateChange","isAtTop","scrollTimeout","index_1","setTimeout","clearTimeout","createElement","Fragment","className","virtualizedMessageList","atBottomThreshold","atTopThreshold","context","firstUnreadMessageId","lastReadDate","lastReadMessageId","last_read_message_id","unreadMessageCount","virtuosoRef","firstItemIndex","increaseViewportBy","bottom","top","initialTopMostItemIndex","itemContent","itemSize","itemsRendered","key","ref","overflowX","totalCount","scrollSeek","hasNewMessages","isNotAtLatestMessageSet","undefined","VirtualizedMessageList","hasMore","loadingMoreNewer","contextMessages"],"sources":["C:/Users/Gesti/Desktop/chat_application/client/node_modules/stream-chat-react/dist/components/MessageList/VirtualizedMessageList.js"],"sourcesContent":["import { __assign, __awaiter, __generator, __rest } from \"tslib\";\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { Virtuoso, } from 'react-virtuoso';\nimport { GiphyPreviewMessage as DefaultGiphyPreviewMessage } from './GiphyPreviewMessage';\nimport { useLastReadData } from './hooks';\nimport { useGiphyPreview, useMessageSetKey, useNewMessageNotification, usePrependedMessagesCount, useScrollToBottomOnNewMessage, useShouldForceScrollToBottom, useUnreadMessagesNotificationVirtualized, } from './hooks/VirtualizedMessageList';\nimport { useMarkRead } from './hooks/useMarkRead';\nimport { MessageNotification as DefaultMessageNotification } from './MessageNotification';\nimport { MessageListNotifications as DefaultMessageListNotifications } from './MessageListNotifications';\nimport { MessageListMainPanel } from './MessageListMainPanel';\nimport { getGroupStyles, getLastReceived, processMessages } from './utils';\nimport { MessageSimple } from '../Message';\nimport { UnreadMessagesNotification as DefaultUnreadMessagesNotification } from './UnreadMessagesNotification';\nimport { calculateFirstItemIndex, calculateItemIndex, EmptyPlaceholder, Footer, Header, Item, makeItemsRenderedHandler, messageRenderer, } from './VirtualizedMessageListComponents';\nimport { useChannelActionContext, } from '../../context/ChannelActionContext';\nimport { useChannelStateContext, } from '../../context/ChannelStateContext';\nimport { useChatContext } from '../../context/ChatContext';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { DEFAULT_NEXT_CHANNEL_PAGE_SIZE } from '../../constants/limits';\nfunction captureResizeObserverExceededError(e) {\n    if (e.message === 'ResizeObserver loop completed with undelivered notifications.' ||\n        e.message === 'ResizeObserver loop limit exceeded') {\n        e.stopImmediatePropagation();\n    }\n}\nfunction useCaptureResizeObserverExceededError() {\n    useEffect(function () {\n        window.addEventListener('error', captureResizeObserverExceededError);\n        return function () {\n            window.removeEventListener('error', captureResizeObserverExceededError);\n        };\n    }, []);\n}\nfunction fractionalItemSize(element) {\n    return element.getBoundingClientRect().height;\n}\nfunction findMessageIndex(messages, id) {\n    return messages.findIndex(function (message) { return message.id === id; });\n}\nfunction calculateInitialTopMostItemIndex(messages, highlightedMessageId) {\n    if (highlightedMessageId) {\n        var index = findMessageIndex(messages, highlightedMessageId);\n        if (index !== -1) {\n            return { align: 'center', index: index };\n        }\n    }\n    return messages.length - 1;\n}\nvar VirtualizedMessageListWithContext = function (props) {\n    var _a, _b;\n    var additionalMessageInputProps = props.additionalMessageInputProps, _c = props.additionalVirtuosoProps, additionalVirtuosoProps = _c === void 0 ? {} : _c, channel = props.channel, channelUnreadUiState = props.channelUnreadUiState, closeReactionSelectorOnClick = props.closeReactionSelectorOnClick, customMessageActions = props.customMessageActions, customMessageRenderer = props.customMessageRenderer, defaultItemHeight = props.defaultItemHeight, _d = props.disableDateSeparator, disableDateSeparator = _d === void 0 ? true : _d, groupStyles = props.groupStyles, hasMoreNewer = props.hasMoreNewer, head = props.head, _e = props.hideDeletedMessages, hideDeletedMessages = _e === void 0 ? false : _e, _f = props.hideNewMessageSeparator, hideNewMessageSeparator = _f === void 0 ? false : _f, highlightedMessageId = props.highlightedMessageId, jumpToLatestMessage = props.jumpToLatestMessage, loadingMore = props.loadingMore, loadMore = props.loadMore, loadMoreNewer = props.loadMoreNewer, MessageUIComponentFromProps = props.Message, messageActions = props.messageActions, _g = props.messageLimit, messageLimit = _g === void 0 ? DEFAULT_NEXT_CHANNEL_PAGE_SIZE : _g, messages = props.messages, notifications = props.notifications, \n    // TODO: refactor to scrollSeekPlaceHolderConfiguration and components.ScrollSeekPlaceholder, like the Virtuoso Component\n    _h = props.overscan, \n    // TODO: refactor to scrollSeekPlaceHolderConfiguration and components.ScrollSeekPlaceholder, like the Virtuoso Component\n    overscan = _h === void 0 ? 0 : _h, read = props.read, _j = props.returnAllReadData, returnAllReadData = _j === void 0 ? false : _j, scrollSeekPlaceHolder = props.scrollSeekPlaceHolder, _k = props.scrollToLatestMessageOnFocus, scrollToLatestMessageOnFocus = _k === void 0 ? false : _k, _l = props.separateGiphyPreview, separateGiphyPreview = _l === void 0 ? false : _l, _m = props.shouldGroupByUser, shouldGroupByUser = _m === void 0 ? false : _m, showUnreadNotificationAlways = props.showUnreadNotificationAlways, sortReactionDetails = props.sortReactionDetails, sortReactions = props.sortReactions, _o = props.stickToBottomScrollBehavior, stickToBottomScrollBehavior = _o === void 0 ? 'smooth' : _o, suppressAutoscroll = props.suppressAutoscroll, threadList = props.threadList;\n    var virtuosoComponentsFromProps = additionalVirtuosoProps.components, overridingVirtuosoProps = __rest(additionalVirtuosoProps, [\"components\"]);\n    // Stops errors generated from react-virtuoso to bubble up\n    // to Sentry or other tracking tools.\n    useCaptureResizeObserverExceededError();\n    var _p = useComponentContext('VirtualizedMessageList'), DateSeparator = _p.DateSeparator, _q = _p.GiphyPreviewMessage, GiphyPreviewMessage = _q === void 0 ? DefaultGiphyPreviewMessage : _q, _r = _p.MessageListNotifications, MessageListNotifications = _r === void 0 ? DefaultMessageListNotifications : _r, _s = _p.MessageNotification, MessageNotification = _s === void 0 ? DefaultMessageNotification : _s, MessageSystem = _p.MessageSystem, _t = _p.UnreadMessagesNotification, UnreadMessagesNotification = _t === void 0 ? DefaultUnreadMessagesNotification : _t, UnreadMessagesSeparator = _p.UnreadMessagesSeparator, _u = _p.VirtualMessage, MessageUIComponentFromContext = _u === void 0 ? MessageSimple : _u;\n    var MessageUIComponent = MessageUIComponentFromProps || MessageUIComponentFromContext;\n    var _v = useChatContext('VirtualizedMessageList'), client = _v.client, customClasses = _v.customClasses;\n    var virtuoso = useRef(null);\n    var lastRead = useMemo(function () { var _a; return (_a = channel.lastRead) === null || _a === void 0 ? void 0 : _a.call(channel); }, [channel]);\n    var _w = useUnreadMessagesNotificationVirtualized({\n        lastRead: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.last_read,\n        showAlways: !!showUnreadNotificationAlways,\n        unreadCount: (_a = channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages) !== null && _a !== void 0 ? _a : 0,\n    }), showUnreadMessagesNotification = _w.show, toggleShowUnreadMessagesNotification = _w.toggleShowUnreadMessagesNotification;\n    var _x = useGiphyPreview(separateGiphyPreview), giphyPreviewMessage = _x.giphyPreviewMessage, setGiphyPreviewMessage = _x.setGiphyPreviewMessage;\n    var processedMessages = useMemo(function () {\n        if (typeof messages === 'undefined') {\n            return [];\n        }\n        if (disableDateSeparator &&\n            !hideDeletedMessages &&\n            hideNewMessageSeparator &&\n            !separateGiphyPreview) {\n            return messages;\n        }\n        return processMessages({\n            enableDateSeparator: !disableDateSeparator,\n            hideDeletedMessages: hideDeletedMessages,\n            hideNewMessageSeparator: hideNewMessageSeparator,\n            lastRead: lastRead,\n            messages: messages,\n            setGiphyPreviewMessage: setGiphyPreviewMessage,\n            userId: client.userID || '',\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        disableDateSeparator,\n        hideDeletedMessages,\n        hideNewMessageSeparator,\n        lastRead,\n        messages,\n        messages === null || messages === void 0 ? void 0 : messages.length,\n        client.userID,\n    ]);\n    // get the mapping of own messages to array of users who read them\n    var ownMessagesReadByOthers = useLastReadData({\n        messages: processedMessages,\n        read: read,\n        returnAllReadData: returnAllReadData,\n        userID: client.userID,\n    });\n    var lastReceivedMessageId = useMemo(function () { return getLastReceived(processedMessages); }, [\n        processedMessages,\n    ]);\n    var groupStylesFn = groupStyles || getGroupStyles;\n    var messageGroupStyles = useMemo(function () {\n        return processedMessages.reduce(function (acc, message, i) {\n            var style = groupStylesFn(message, processedMessages[i - 1], processedMessages[i + 1], !shouldGroupByUser);\n            if (style)\n                acc[message.id] = style;\n            return acc;\n        }, {});\n    }, \n    // processedMessages were incorrectly rebuilt with a new object identity at some point, hence the .length usage\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [processedMessages.length, shouldGroupByUser, groupStylesFn]);\n    var _y = useNewMessageNotification(processedMessages, client.userID, hasMoreNewer), atBottom = _y.atBottom, isMessageListScrolledToBottom = _y.isMessageListScrolledToBottom, newMessagesNotification = _y.newMessagesNotification, setIsMessageListScrolledToBottom = _y.setIsMessageListScrolledToBottom, setNewMessagesNotification = _y.setNewMessagesNotification;\n    useMarkRead({\n        isMessageListScrolledToBottom: isMessageListScrolledToBottom,\n        messageListIsThread: !!threadList,\n        unreadCount: (_b = channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages) !== null && _b !== void 0 ? _b : 0,\n        wasMarkedUnread: !!(channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.first_unread_message_id),\n    });\n    var scrollToBottom = useCallback(function () { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!hasMoreNewer) return [3 /*break*/, 2];\n                    return [4 /*yield*/, jumpToLatestMessage()];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n                case 2:\n                    if (virtuoso.current) {\n                        virtuoso.current.scrollToIndex(processedMessages.length - 1);\n                    }\n                    setNewMessagesNotification(false);\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [\n        virtuoso,\n        processedMessages,\n        setNewMessagesNotification,\n        // processedMessages were incorrectly rebuilt with a new object identity at some point, hence the .length usage\n        processedMessages.length,\n        hasMoreNewer,\n        jumpToLatestMessage,\n    ]);\n    useScrollToBottomOnNewMessage({ messages: messages, scrollToBottom: scrollToBottom, scrollToLatestMessageOnFocus: scrollToLatestMessageOnFocus });\n    var numItemsPrepended = usePrependedMessagesCount(processedMessages, !disableDateSeparator);\n    var messageSetKey = useMessageSetKey({ messages: messages }).messageSetKey;\n    var shouldForceScrollToBottom = useShouldForceScrollToBottom(processedMessages, client.userID);\n    var handleItemsRendered = useMemo(function () { return makeItemsRenderedHandler([toggleShowUnreadMessagesNotification], processedMessages); }, [processedMessages, toggleShowUnreadMessagesNotification]);\n    var followOutput = function (isAtBottom) {\n        if (hasMoreNewer || suppressAutoscroll) {\n            return false;\n        }\n        if (shouldForceScrollToBottom()) {\n            return isAtBottom ? stickToBottomScrollBehavior : 'auto';\n        }\n        // a message from another user has been received - don't scroll to bottom unless already there\n        return isAtBottom ? stickToBottomScrollBehavior : false;\n    };\n    var computeItemKey = useCallback(function (index, _, _a) {\n        var numItemsPrepended = _a.numItemsPrepended, processedMessages = _a.processedMessages;\n        return processedMessages[calculateItemIndex(index, numItemsPrepended)].id;\n    }, []);\n    var atBottomStateChange = function (isAtBottom) {\n        atBottom.current = isAtBottom;\n        setIsMessageListScrolledToBottom(isAtBottom);\n        if (isAtBottom) {\n            loadMoreNewer === null || loadMoreNewer === void 0 ? void 0 : loadMoreNewer(messageLimit);\n            setNewMessagesNotification === null || setNewMessagesNotification === void 0 ? void 0 : setNewMessagesNotification(false);\n        }\n    };\n    var atTopStateChange = function (isAtTop) {\n        if (isAtTop) {\n            loadMore === null || loadMore === void 0 ? void 0 : loadMore(messageLimit);\n        }\n    };\n    useEffect(function () {\n        var scrollTimeout;\n        if (highlightedMessageId) {\n            var index_1 = findMessageIndex(processedMessages, highlightedMessageId);\n            if (index_1 !== -1) {\n                scrollTimeout = setTimeout(function () {\n                    var _a;\n                    (_a = virtuoso.current) === null || _a === void 0 ? void 0 : _a.scrollToIndex({ align: 'center', index: index_1 });\n                }, 0);\n            }\n        }\n        return function () {\n            clearTimeout(scrollTimeout);\n        };\n    }, [highlightedMessageId, processedMessages]);\n    if (!processedMessages)\n        return null;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(MessageListMainPanel, null,\n            !threadList && showUnreadMessagesNotification && (React.createElement(UnreadMessagesNotification, { unreadCount: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages })),\n            React.createElement(\"div\", { className: (customClasses === null || customClasses === void 0 ? void 0 : customClasses.virtualizedMessageList) || 'str-chat__virtual-list' },\n                React.createElement(Virtuoso, __assign({ atBottomStateChange: atBottomStateChange, atBottomThreshold: 100, atTopStateChange: atTopStateChange, atTopThreshold: 100, className: 'str-chat__message-list-scroll', components: __assign({ EmptyPlaceholder: EmptyPlaceholder, Footer: Footer, Header: Header, Item: Item }, virtuosoComponentsFromProps), computeItemKey: computeItemKey, context: {\n                        additionalMessageInputProps: additionalMessageInputProps,\n                        closeReactionSelectorOnClick: closeReactionSelectorOnClick,\n                        customClasses: customClasses,\n                        customMessageActions: customMessageActions,\n                        customMessageRenderer: customMessageRenderer,\n                        DateSeparator: DateSeparator,\n                        firstUnreadMessageId: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.first_unread_message_id,\n                        head: head,\n                        lastReadDate: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.last_read,\n                        lastReadMessageId: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.last_read_message_id,\n                        lastReceivedMessageId: lastReceivedMessageId,\n                        loadingMore: loadingMore,\n                        Message: MessageUIComponent,\n                        messageActions: messageActions,\n                        messageGroupStyles: messageGroupStyles,\n                        MessageSystem: MessageSystem,\n                        numItemsPrepended: numItemsPrepended,\n                        ownMessagesReadByOthers: ownMessagesReadByOthers,\n                        processedMessages: processedMessages,\n                        shouldGroupByUser: shouldGroupByUser,\n                        sortReactionDetails: sortReactionDetails,\n                        sortReactions: sortReactions,\n                        threadList: threadList,\n                        unreadMessageCount: channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages,\n                        UnreadMessagesSeparator: UnreadMessagesSeparator,\n                        virtuosoRef: virtuoso,\n                    }, firstItemIndex: calculateFirstItemIndex(numItemsPrepended), followOutput: followOutput, increaseViewportBy: { bottom: 200, top: 0 }, initialTopMostItemIndex: calculateInitialTopMostItemIndex(processedMessages, highlightedMessageId), itemContent: messageRenderer, itemSize: fractionalItemSize, itemsRendered: handleItemsRendered, key: messageSetKey, overscan: overscan, ref: virtuoso, style: { overflowX: 'hidden' }, totalCount: processedMessages.length }, overridingVirtuosoProps, (scrollSeekPlaceHolder ? { scrollSeek: scrollSeekPlaceHolder } : {}), (defaultItemHeight ? { defaultItemHeight: defaultItemHeight } : {}))))),\n        React.createElement(MessageListNotifications, { hasNewMessages: newMessagesNotification, isMessageListScrolledToBottom: isMessageListScrolledToBottom, isNotAtLatestMessageSet: hasMoreNewer, MessageNotification: MessageNotification, notifications: notifications, scrollToBottom: scrollToBottom, threadList: threadList, unreadCount: threadList ? undefined : channelUnreadUiState === null || channelUnreadUiState === void 0 ? void 0 : channelUnreadUiState.unread_messages }),\n        giphyPreviewMessage && React.createElement(GiphyPreviewMessage, { message: giphyPreviewMessage })));\n};\n/**\n * The VirtualizedMessageList component renders a list of messages in a virtualized list.\n * It is a consumer of the React contexts set in [Channel](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Channel/Channel.tsx).\n */\nexport function VirtualizedMessageList(props) {\n    var _a = useChannelActionContext('VirtualizedMessageList'), jumpToLatestMessage = _a.jumpToLatestMessage, loadMore = _a.loadMore, loadMoreNewer = _a.loadMoreNewer;\n    var _b = useChannelStateContext('VirtualizedMessageList'), channel = _b.channel, channelUnreadUiState = _b.channelUnreadUiState, hasMore = _b.hasMore, hasMoreNewer = _b.hasMoreNewer, highlightedMessageId = _b.highlightedMessageId, loadingMore = _b.loadingMore, loadingMoreNewer = _b.loadingMoreNewer, contextMessages = _b.messages, notifications = _b.notifications, read = _b.read, suppressAutoscroll = _b.suppressAutoscroll;\n    var messages = props.messages || contextMessages;\n    return (React.createElement(VirtualizedMessageListWithContext, __assign({ channel: channel, channelUnreadUiState: channelUnreadUiState, hasMore: !!hasMore, hasMoreNewer: !!hasMoreNewer, highlightedMessageId: highlightedMessageId, jumpToLatestMessage: jumpToLatestMessage, loadingMore: !!loadingMore, loadingMoreNewer: !!loadingMoreNewer, loadMore: loadMore, loadMoreNewer: loadMoreNewer, messages: messages, notifications: notifications, read: read, suppressAutoscroll: suppressAutoscroll }, props)));\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}