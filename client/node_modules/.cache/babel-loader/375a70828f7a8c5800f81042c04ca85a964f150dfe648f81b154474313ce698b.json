{"ast":null,"code":"import { useCallback, useMemo } from 'react';\nimport { useComponentContext, useMessageContext } from '../../../context';\nexport var defaultReactionsSort = function (a, b) {\n  return a.reactionType.localeCompare(b.reactionType, 'en');\n};\nexport var useProcessReactions = function (params) {\n  var _a;\n  var propOwnReactions = params.own_reactions,\n    propReactionCounts = params.reaction_counts,\n    propReactionOptions = params.reactionOptions,\n    propReactions = params.reactions,\n    propSortReactions = params.sortReactions;\n  var _b = useMessageContext('useProcessReactions'),\n    message = _b.message,\n    contextSortReactions = _b.sortReactions;\n  var contextReactionOptions = useComponentContext('useProcessReactions').reactionOptions;\n  var reactionOptions = propReactionOptions !== null && propReactionOptions !== void 0 ? propReactionOptions : contextReactionOptions;\n  var sortReactions = (_a = propSortReactions !== null && propSortReactions !== void 0 ? propSortReactions : contextSortReactions) !== null && _a !== void 0 ? _a : defaultReactionsSort;\n  var latestReactions = propReactions || message.latest_reactions;\n  var ownReactions = propOwnReactions || (message === null || message === void 0 ? void 0 : message.own_reactions);\n  var reactionCounts = propReactionCounts || message.reaction_counts;\n  var isOwnReaction = useCallback(function (reactionType) {\n    var _a;\n    return (_a = ownReactions === null || ownReactions === void 0 ? void 0 : ownReactions.some(function (reaction) {\n      return reaction.type === reactionType;\n    })) !== null && _a !== void 0 ? _a : false;\n  }, [ownReactions]);\n  var getEmojiByReactionType = useCallback(function (reactionType) {\n    var _a, _b;\n    return (_b = (_a = reactionOptions.find(function (_a) {\n      var type = _a.type;\n      return type === reactionType;\n    })) === null || _a === void 0 ? void 0 : _a.Component) !== null && _b !== void 0 ? _b : null;\n  }, [reactionOptions]);\n  var isSupportedReaction = useCallback(function (reactionType) {\n    return reactionOptions.some(function (reactionOption) {\n      return reactionOption.type === reactionType;\n    });\n  }, [reactionOptions]);\n  var getLatestReactedUserNames = useCallback(function (reactionType) {\n    var _a;\n    return (_a = latestReactions === null || latestReactions === void 0 ? void 0 : latestReactions.flatMap(function (reaction) {\n      var _a, _b;\n      if (reactionType && reactionType === reaction.type) {\n        var username = ((_a = reaction.user) === null || _a === void 0 ? void 0 : _a.name) || ((_b = reaction.user) === null || _b === void 0 ? void 0 : _b.id);\n        return username ? [username] : [];\n      }\n      return [];\n    })) !== null && _a !== void 0 ? _a : [];\n  }, [latestReactions]);\n  var existingReactions = useMemo(function () {\n    if (!reactionCounts) {\n      return [];\n    }\n    var unsortedReactions = Object.entries(reactionCounts).flatMap(function (_a) {\n      var reactionType = _a[0],\n        reactionCount = _a[1];\n      if (reactionCount === 0 || !isSupportedReaction(reactionType)) {\n        return [];\n      }\n      return [{\n        EmojiComponent: getEmojiByReactionType(reactionType),\n        isOwnReaction: isOwnReaction(reactionType),\n        latestReactedUserNames: getLatestReactedUserNames(reactionType),\n        reactionCount: reactionCount,\n        reactionType: reactionType\n      }];\n    });\n    return unsortedReactions.sort(sortReactions);\n  }, [getEmojiByReactionType, getLatestReactedUserNames, isOwnReaction, isSupportedReaction, reactionCounts, sortReactions]);\n  var hasReactions = existingReactions.length > 0;\n  var totalReactionCount = useMemo(function () {\n    return existingReactions.reduce(function (total, _a) {\n      var reactionCount = _a.reactionCount;\n      return total + reactionCount;\n    }, 0);\n  }, [existingReactions]);\n  return {\n    existingReactions: existingReactions,\n    hasReactions: hasReactions,\n    totalReactionCount: totalReactionCount\n  };\n};","map":{"version":3,"names":["useCallback","useMemo","useComponentContext","useMessageContext","defaultReactionsSort","a","b","reactionType","localeCompare","useProcessReactions","params","_a","propOwnReactions","own_reactions","propReactionCounts","reaction_counts","propReactionOptions","reactionOptions","propReactions","reactions","propSortReactions","sortReactions","_b","message","contextSortReactions","contextReactionOptions","latestReactions","latest_reactions","ownReactions","reactionCounts","isOwnReaction","some","reaction","type","getEmojiByReactionType","find","Component","isSupportedReaction","reactionOption","getLatestReactedUserNames","flatMap","username","user","name","id","existingReactions","unsortedReactions","Object","entries","reactionCount","EmojiComponent","latestReactedUserNames","sort","hasReactions","length","totalReactionCount","reduce","total"],"sources":["C:/Users/Gesti/Desktop/chat_application/client/node_modules/stream-chat-react/dist/components/Reactions/hooks/useProcessReactions.js"],"sourcesContent":["import { useCallback, useMemo } from 'react';\nimport { useComponentContext, useMessageContext } from '../../../context';\nexport var defaultReactionsSort = function (a, b) {\n    return a.reactionType.localeCompare(b.reactionType, 'en');\n};\nexport var useProcessReactions = function (params) {\n    var _a;\n    var propOwnReactions = params.own_reactions, propReactionCounts = params.reaction_counts, propReactionOptions = params.reactionOptions, propReactions = params.reactions, propSortReactions = params.sortReactions;\n    var _b = useMessageContext('useProcessReactions'), message = _b.message, contextSortReactions = _b.sortReactions;\n    var contextReactionOptions = useComponentContext('useProcessReactions').reactionOptions;\n    var reactionOptions = propReactionOptions !== null && propReactionOptions !== void 0 ? propReactionOptions : contextReactionOptions;\n    var sortReactions = (_a = propSortReactions !== null && propSortReactions !== void 0 ? propSortReactions : contextSortReactions) !== null && _a !== void 0 ? _a : defaultReactionsSort;\n    var latestReactions = propReactions || message.latest_reactions;\n    var ownReactions = propOwnReactions || (message === null || message === void 0 ? void 0 : message.own_reactions);\n    var reactionCounts = propReactionCounts || message.reaction_counts;\n    var isOwnReaction = useCallback(function (reactionType) { var _a; return (_a = ownReactions === null || ownReactions === void 0 ? void 0 : ownReactions.some(function (reaction) { return reaction.type === reactionType; })) !== null && _a !== void 0 ? _a : false; }, [ownReactions]);\n    var getEmojiByReactionType = useCallback(function (reactionType) { var _a, _b; return (_b = (_a = reactionOptions.find(function (_a) {\n        var type = _a.type;\n        return type === reactionType;\n    })) === null || _a === void 0 ? void 0 : _a.Component) !== null && _b !== void 0 ? _b : null; }, [reactionOptions]);\n    var isSupportedReaction = useCallback(function (reactionType) {\n        return reactionOptions.some(function (reactionOption) { return reactionOption.type === reactionType; });\n    }, [reactionOptions]);\n    var getLatestReactedUserNames = useCallback(function (reactionType) {\n        var _a;\n        return (_a = latestReactions === null || latestReactions === void 0 ? void 0 : latestReactions.flatMap(function (reaction) {\n            var _a, _b;\n            if (reactionType && reactionType === reaction.type) {\n                var username = ((_a = reaction.user) === null || _a === void 0 ? void 0 : _a.name) || ((_b = reaction.user) === null || _b === void 0 ? void 0 : _b.id);\n                return username ? [username] : [];\n            }\n            return [];\n        })) !== null && _a !== void 0 ? _a : [];\n    }, [latestReactions]);\n    var existingReactions = useMemo(function () {\n        if (!reactionCounts) {\n            return [];\n        }\n        var unsortedReactions = Object.entries(reactionCounts).flatMap(function (_a) {\n            var reactionType = _a[0], reactionCount = _a[1];\n            if (reactionCount === 0 || !isSupportedReaction(reactionType)) {\n                return [];\n            }\n            return [\n                {\n                    EmojiComponent: getEmojiByReactionType(reactionType),\n                    isOwnReaction: isOwnReaction(reactionType),\n                    latestReactedUserNames: getLatestReactedUserNames(reactionType),\n                    reactionCount: reactionCount,\n                    reactionType: reactionType,\n                },\n            ];\n        });\n        return unsortedReactions.sort(sortReactions);\n    }, [\n        getEmojiByReactionType,\n        getLatestReactedUserNames,\n        isOwnReaction,\n        isSupportedReaction,\n        reactionCounts,\n        sortReactions,\n    ]);\n    var hasReactions = existingReactions.length > 0;\n    var totalReactionCount = useMemo(function () { return existingReactions.reduce(function (total, _a) {\n        var reactionCount = _a.reactionCount;\n        return total + reactionCount;\n    }, 0); }, [existingReactions]);\n    return {\n        existingReactions: existingReactions,\n        hasReactions: hasReactions,\n        totalReactionCount: totalReactionCount,\n    };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}