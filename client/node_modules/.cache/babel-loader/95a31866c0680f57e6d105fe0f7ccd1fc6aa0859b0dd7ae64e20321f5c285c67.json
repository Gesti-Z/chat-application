{"ast":null,"code":"import { useCallback, useLayoutEffect, useRef, useState } from 'react';\nimport { useMessageListScrollManager } from './useMessageListScrollManager';\nexport var useScrollLocationLogic = function (params) {\n  var loadMoreScrollThreshold = params.loadMoreScrollThreshold,\n    _a = params.messages,\n    messages = _a === void 0 ? [] : _a,\n    _b = params.scrolledUpThreshold,\n    scrolledUpThreshold = _b === void 0 ? 200 : _b,\n    hasMoreNewer = params.hasMoreNewer,\n    suppressAutoscroll = params.suppressAutoscroll,\n    listElement = params.listElement;\n  var _c = useState(false),\n    hasNewMessages = _c[0],\n    setHasNewMessages = _c[1];\n  var _d = useState(),\n    wrapperRect = _d[0],\n    setWrapperRect = _d[1];\n  var _e = useState(true),\n    isMessageListScrolledToBottom = _e[0],\n    setIsMessageListScrolledToBottom = _e[1];\n  var closeToBottom = useRef(false);\n  var closeToTop = useRef(false);\n  var scrollToBottom = useCallback(function () {\n    if (!(listElement === null || listElement === void 0 ? void 0 : listElement.scrollTo) || hasMoreNewer || suppressAutoscroll) {\n      return;\n    }\n    listElement.scrollTo({\n      top: listElement.scrollHeight\n    });\n    setHasNewMessages(false);\n  }, [listElement, hasMoreNewer, suppressAutoscroll]);\n  useLayoutEffect(function () {\n    if (listElement) {\n      setWrapperRect(listElement.getBoundingClientRect());\n      scrollToBottom();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [listElement, hasMoreNewer]);\n  var updateScrollTop = useMessageListScrollManager({\n    loadMoreScrollThreshold: loadMoreScrollThreshold,\n    messages: messages,\n    onScrollBy: function (scrollBy) {\n      listElement === null || listElement === void 0 ? void 0 : listElement.scrollBy({\n        top: scrollBy\n      });\n    },\n    scrollContainerMeasures: function () {\n      return {\n        offsetHeight: (listElement === null || listElement === void 0 ? void 0 : listElement.offsetHeight) || 0,\n        scrollHeight: (listElement === null || listElement === void 0 ? void 0 : listElement.scrollHeight) || 0\n      };\n    },\n    scrolledUpThreshold: scrolledUpThreshold,\n    scrollToBottom: scrollToBottom,\n    showNewMessages: function () {\n      return setHasNewMessages(true);\n    }\n  });\n  var onScroll = useCallback(function (event) {\n    var element = event.target;\n    var scrollTop = element.scrollTop;\n    updateScrollTop(scrollTop);\n    var offsetHeight = element.offsetHeight;\n    var scrollHeight = element.scrollHeight;\n    var prevCloseToBottom = closeToBottom.current;\n    closeToBottom.current = scrollHeight - (scrollTop + offsetHeight) < scrolledUpThreshold;\n    closeToTop.current = scrollTop < scrolledUpThreshold;\n    if (closeToBottom.current) {\n      setHasNewMessages(false);\n    }\n    if (prevCloseToBottom && !closeToBottom.current) {\n      setIsMessageListScrolledToBottom(false);\n    } else if (!prevCloseToBottom && closeToBottom.current) {\n      setIsMessageListScrolledToBottom(true);\n    }\n  }, [updateScrollTop, closeToTop, closeToBottom, scrolledUpThreshold]);\n  return {\n    hasNewMessages: hasNewMessages,\n    isMessageListScrolledToBottom: isMessageListScrolledToBottom,\n    onScroll: onScroll,\n    scrollToBottom: scrollToBottom,\n    wrapperRect: wrapperRect\n  };\n};","map":{"version":3,"names":["useCallback","useLayoutEffect","useRef","useState","useMessageListScrollManager","useScrollLocationLogic","params","loadMoreScrollThreshold","_a","messages","_b","scrolledUpThreshold","hasMoreNewer","suppressAutoscroll","listElement","_c","hasNewMessages","setHasNewMessages","_d","wrapperRect","setWrapperRect","_e","isMessageListScrolledToBottom","setIsMessageListScrolledToBottom","closeToBottom","closeToTop","scrollToBottom","scrollTo","top","scrollHeight","getBoundingClientRect","updateScrollTop","onScrollBy","scrollBy","scrollContainerMeasures","offsetHeight","showNewMessages","onScroll","event","element","target","scrollTop","prevCloseToBottom","current"],"sources":["C:/Users/Gesti/Desktop/chat_application/client/node_modules/stream-chat-react/dist/components/MessageList/hooks/MessageList/useScrollLocationLogic.js"],"sourcesContent":["import { useCallback, useLayoutEffect, useRef, useState } from 'react';\nimport { useMessageListScrollManager } from './useMessageListScrollManager';\nexport var useScrollLocationLogic = function (params) {\n    var loadMoreScrollThreshold = params.loadMoreScrollThreshold, _a = params.messages, messages = _a === void 0 ? [] : _a, _b = params.scrolledUpThreshold, scrolledUpThreshold = _b === void 0 ? 200 : _b, hasMoreNewer = params.hasMoreNewer, suppressAutoscroll = params.suppressAutoscroll, listElement = params.listElement;\n    var _c = useState(false), hasNewMessages = _c[0], setHasNewMessages = _c[1];\n    var _d = useState(), wrapperRect = _d[0], setWrapperRect = _d[1];\n    var _e = useState(true), isMessageListScrolledToBottom = _e[0], setIsMessageListScrolledToBottom = _e[1];\n    var closeToBottom = useRef(false);\n    var closeToTop = useRef(false);\n    var scrollToBottom = useCallback(function () {\n        if (!(listElement === null || listElement === void 0 ? void 0 : listElement.scrollTo) || hasMoreNewer || suppressAutoscroll) {\n            return;\n        }\n        listElement.scrollTo({\n            top: listElement.scrollHeight,\n        });\n        setHasNewMessages(false);\n    }, [listElement, hasMoreNewer, suppressAutoscroll]);\n    useLayoutEffect(function () {\n        if (listElement) {\n            setWrapperRect(listElement.getBoundingClientRect());\n            scrollToBottom();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [listElement, hasMoreNewer]);\n    var updateScrollTop = useMessageListScrollManager({\n        loadMoreScrollThreshold: loadMoreScrollThreshold,\n        messages: messages,\n        onScrollBy: function (scrollBy) {\n            listElement === null || listElement === void 0 ? void 0 : listElement.scrollBy({ top: scrollBy });\n        },\n        scrollContainerMeasures: function () { return ({\n            offsetHeight: (listElement === null || listElement === void 0 ? void 0 : listElement.offsetHeight) || 0,\n            scrollHeight: (listElement === null || listElement === void 0 ? void 0 : listElement.scrollHeight) || 0,\n        }); },\n        scrolledUpThreshold: scrolledUpThreshold,\n        scrollToBottom: scrollToBottom,\n        showNewMessages: function () { return setHasNewMessages(true); },\n    });\n    var onScroll = useCallback(function (event) {\n        var element = event.target;\n        var scrollTop = element.scrollTop;\n        updateScrollTop(scrollTop);\n        var offsetHeight = element.offsetHeight;\n        var scrollHeight = element.scrollHeight;\n        var prevCloseToBottom = closeToBottom.current;\n        closeToBottom.current = scrollHeight - (scrollTop + offsetHeight) < scrolledUpThreshold;\n        closeToTop.current = scrollTop < scrolledUpThreshold;\n        if (closeToBottom.current) {\n            setHasNewMessages(false);\n        }\n        if (prevCloseToBottom && !closeToBottom.current) {\n            setIsMessageListScrolledToBottom(false);\n        }\n        else if (!prevCloseToBottom && closeToBottom.current) {\n            setIsMessageListScrolledToBottom(true);\n        }\n    }, [updateScrollTop, closeToTop, closeToBottom, scrolledUpThreshold]);\n    return {\n        hasNewMessages: hasNewMessages,\n        isMessageListScrolledToBottom: isMessageListScrolledToBottom,\n        onScroll: onScroll,\n        scrollToBottom: scrollToBottom,\n        wrapperRect: wrapperRect,\n    };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}